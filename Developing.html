<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developers’ Instructions &mdash; tempest_helper 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing" href="Contributing.html" />
    <link rel="prev" title="tempest_helper" href="tempest_helper.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> tempest_helper
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Installing.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_format.html">Data format</a></li>
<li class="toctree-l1"><a class="reference internal" href="tempest_helper.html">tempest_helper documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developers’ Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tests-run">Tests run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-tests-locally">Running the tests locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-documentation">Building the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#git-workflow">Git workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tempest_helper</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Developers’ Instructions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Developing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developers-instructions">
<h1>Developers’ Instructions<a class="headerlink" href="#developers-instructions" title="Permalink to this headline"></a></h1>
<p>The <cite>tempest_helper</cite> code contains a comprehensive set of unit tests to check that
it works as intended; the tests are run automatically on pull
requests using GitHub Actions. Details of the tests that are run and instructions
on how to run them locally are included here. A suggested Git workflow has also
been included for users who are new to Git.</p>
<section id="tests-run">
<h2>Tests run<a class="headerlink" href="#tests-run" title="Permalink to this headline"></a></h2>
<p>The following tests are configured (in the <code class="docutils literal notranslate"><span class="pre">.github/workflows/*.yml</span></code> files in the
repository) to run on pull requests and branches in GitHub:</p>
<ul class="simple">
<li><p>the unit tests in the <code class="docutils literal notranslate"><span class="pre">test_tempest_helper</span></code> directory. The tests use the
unittest framework but pytest provides a convenient way to run them;</p></li>
<li><p>the <a class="reference external" href="https://black.readthedocs.io/en/stable/">Black</a> Python code formatter
to ensure that code is written in a consistent style;</p></li>
<li><p><a class="reference external" href="https://pycodestyle.pycqa.org/en/latest/">pycodestyle</a> (known previously as
<cite>pep8</cite>) to check that code follows the <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">Python PEP8</a>
style conventions.</p></li>
</ul>
</section>
<section id="running-the-tests-locally">
<h2>Running the tests locally<a class="headerlink" href="#running-the-tests-locally" title="Permalink to this headline"></a></h2>
<ol class="arabic">
<li><p>Load a Python environment in the usual way for your location.</p></li>
<li><p>Run the tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">vv</span>
</pre></div>
</div>
<p>the warnings reported come from modules imported by <cite>tempest_helper</cite> and can be
ignored but all of the tests must pass.</p>
</li>
<li><p>The version of Black run should match the version run by GitHub actions to prevent
the automated tests from failing. The version of Black in scientific Python
environments may lag behind the version used by GitHub Actions (the latest
version installed using pip). Please contact your local Python expert if you need
assistance installing the latest version.</p>
<p>Black will modify your code so that it complies with its format. You may want to commit
your changes using Git before running Black. Black can be run with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">black</span> <span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>pycodestyle can be run with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pycodestyle</span> <span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span><span class="o">=</span><span class="mi">88</span> <span class="o">.</span>
</pre></div>
</div>
<p>and a return value of 0 or no output to the termninal indicates success.</p>
</li>
</ol>
</section>
<section id="building-the-documentation">
<h2>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline"></a></h2>
<p>In the checked out repository, make sure that your Python environment includes
Sphinx (standard scientific ones often do):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">tempest_helper</span>
<span class="n">cd</span> <span class="n">docs</span>
<span class="n">make</span> <span class="n">clean</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>The build documentation can then be viewed in your browser (replace Firefox
with the name of your browser if required):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">firefox</span> <span class="n">build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
</section>
<section id="git-workflow">
<h2>Git workflow<a class="headerlink" href="#git-workflow" title="Permalink to this headline"></a></h2>
<p>This is just a suggested workflow for users who are new to Git.</p>
<ol class="arabic">
<li><p>Setup your SSH keys (<a class="reference external" href="https://docs.github.com/en/free-pro-team&#64;latest/github/authenticating-to-github/connecting-to-github-with-ssh">https://docs.github.com/en/free-pro-team&#64;latest/github/authenticating-to-github/connecting-to-github-with-ssh</a>)</p></li>
<li><p>Obtain a local copy of the suite:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">MetOffice</span><span class="o">/</span><span class="n">tempest_helper</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Change directory into the repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">tempest_helper</span>
</pre></div>
</div>
</li>
<li><p>If you have previously cloned the repository then update your local copy to
the latest version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">main</span>
<span class="n">git</span> <span class="n">pull</span> <span class="n">origin</span> <span class="n">main</span>
</pre></div>
</div>
</li>
<li><p>Create a branch for your changes and change to this branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">fetch</span> <span class="n">origin</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">&lt;</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="n">origin</span><span class="o">/</span><span class="n">main</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>When you’re happy with your changes, check the changes that you’ve made:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">status</span>
<span class="n">git</span> <span class="n">diff</span>
</pre></div>
</div>
</li>
<li><p>You can then commit these changes and push them back up to GitHub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">am</span> <span class="s1">&#39;&lt;commit message&gt;&#39;</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="o">&lt;</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>You can make as many commits and pushes as you want.</p></li>
<li><p>Create a pull request at <a class="reference external" href="https://github.com/MetOffice/tempest_helper/compare">https://github.com/MetOffice/tempest_helper/compare</a>
by in the compare box selecting your branch and clicking on “Create pull request”.</p></li>
<li><p>Once the code has been reviewed then the pull request can be merged using the
GitHub web page for that pull request.</p></li>
<li><p>After merging, change your local copy of the code back to the main branch, delete
your local copy of the development branch and pull in the changes from GitHub’s
main branch to your local copy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">main</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">D</span>  <span class="o">&lt;</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">pull</span> <span class="n">origin</span> <span class="n">main</span>
</pre></div>
</div>
</li>
</ol>
<p>To examine complex changes, you might also want to consider using graphical diff
rather than just the command line, in which case you should add the following lines
to your <code class="docutils literal notranslate"><span class="pre">~/.gitconfig</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">diff</span><span class="p">]</span>
     <span class="n">tool</span> <span class="o">=</span> <span class="n">tkdiff</span>
<span class="p">[</span><span class="n">difftool</span><span class="p">]</span>
     <span class="n">prompt</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>and then, rather than just <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">difftool</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tempest_helper.html" class="btn btn-neutral float-left" title="tempest_helper" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Contributing.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Met Office.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>